# Nome do workflow que aparece no GitHub
name: И Testes Automatizados

# Quando executar os testes
on:
  push:                    # A cada push em qualquer branch
    branches: [ main, dev ]
  pull_request:           # A cada pull request
    branches: [ main, dev ]

# Jobs que ser茫o executados
jobs:
  test:
    name: Executar Testes
    runs-on: ubuntu-latest  # M谩quina virtual Ubuntu

    steps:
      # 1. Baixar o c贸digo do reposit贸rio
      - name:  Checkout do c贸digo
        uses: actions/checkout@v4

      # 2. Configurar Node.js
      - name: 锔 Configurar Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'

      # 3. Instalar depend锚ncias
      - name:  Instalar depend锚ncias
        run: npm ci

      # 4. Executar os testes com cobertura
      - name: И Executar testes
        run: npm run test:ci

      # 6. (Opcional) Upload do relat贸rio de cobertura
      - name:  Upload cobertura para Codecov
        uses: codecov/codecov-action@v3
        if: success()
        with:
          file: ./coverage/lcov.info
          fail_ci_if_error: false